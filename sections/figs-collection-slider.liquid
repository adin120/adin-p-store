{% style %}
  .wildFigs-sellers-slider {
    width: 100%;
    position: relative;
    margin: 0 auto;
    padding: 20px 0 40px;
    overflow: hidden;
  }

  @media (max-width: 768px) {
    .wildFigs-sellers-slider {
      padding: 0px 10px 0px;
      margin-bottom: 70px;
    }
  }

  .wildFigs-title-container {
    max-width: 1500px;
    width: 100%;
    padding: 50px 20px 0;
    margin: 0 auto;
  }

  @media (max-width: 768px) {
    .wildFigs-title-container {
      padding: 20px 15px 10px;
    }
  }

  .wildFigs-section-title {
    font-size: 28px;
    font-weight: 700;
    line-height: 1.5;
    letter-spacing: 0.05em;
    margin: 0;
  }

  @media (max-width: 768px) {
    .wildFigs-section-title {
      font-size: 20px;
    }
  }

  .wildFigs-slider-container {
    width: 100%;
    max-width: 1760px;
    margin: 0 auto;
    position: relative;
    padding: 0 20px;
  }

  .wildFigs-slider-track {
    display: flex;
    transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    will-change: transform;
    padding-left: 20px;
  }

  .wildFigs-slide {
    flex: 0 0 calc(25% - 15px);
    margin-right: 15px;
    scroll-snap-align: start;
    text-align: center;
    transition: all 0.3s ease;
  }

  .wildFigs-slide:hover {
    transform: scale(1.02);
  }

  .wildFigs-product-image {
    width: 100%;
    height: 550px;
    object-fit: cover;
    margin-bottom: 15px;
    border-radius: 8px;
  }

  .wildFigs-product-title {
    font-size: 16px;
    margin-bottom: 5px;
    font-weight: 500;
    line-height: 1.3;
    margin: 0;
    text-transform: uppercase;
  }

  .wildFigs-product-price {
    font-size: 16px;
    color: #000;
    font-weight: 600;
    margin: 0;
  }

  @media (max-width: 1200px) {
    .wildFigs-slide {
      flex: 0 0 calc(33.333% - 15px);
    }
    .wildFigs-product-image {
      height: 350px;
    }
  }

  @media (max-width: 992px) {
    .wildFigs-slide {
      flex: 0 0 calc(50% - 15px);
    }
    .wildFigs-product-image {
      height: 320px;
    }
  }

  @media (max-width: 768px) {
    .wildFigs-slide {
      flex: 0 0 calc(100% - 15px);
    }
    .wildFigs-product-image {
      height: auto;
      max-height: 400px;
    }
    .wildFigs-product-title {
      font-size: 14px;
    }
    .wildFigs-product-price {
      font-size: 14px;
    }
  }

  .wildFigs-slider-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #fff;
    border: 1px solid #e0e0e0;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
    transition: all 0.3s ease;
  }

  .wildFigs-slider-btn:hover {
    background: #f0f0f0;
  }

  .wildFigs-slider-btn-prev {
    left: 70px;
  }

  .wildFigs-slider-btn-next {
    right: 70px;
  }

  .wildFigs-slider-btn svg {
    width: 16px;
    height: 16px;
  }

  .wildFigs-product-link {
    text-decoration: none;
    color: inherit;
    display: block;
  }
{% endstyle %}

<div class="wildFigs-title-container">
  <h2 class="wildFigs-section-title">{{ section.settings.title }}</h2>
</div>

<div class="wildFigs-sellers-slider">
  <div class="wildFigs-slider-container">
    <div class="wildFigs-slider-track" id="wildFigs-slider-track">
      {% for collection in section.settings.collections %}
        <div class="wildFigs-slide">
          <a href="{{ collection.url }}" class="wildFigs-product-link">
            <img
              src="{{ collection.image | img_url: '600x' }}"
              alt="{{ collection.title }}"
              class="wildFigs-product-image"
              loading="lazy"
              width="600"
              height="600"
            >
            <h3 class="wildFigs-product-title">{{ collection.title }}</h3>
          </a>
        </div>
      {% endfor %}
    </div>

    <button class="wildFigs-slider-btn wildFigs-slider-btn-prev" id="wildFigs-prev-btn">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <button class="wildFigs-slider-btn wildFigs-slider-btn-next" id="wildFigs-next-btn">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const track = document.getElementById('wildFigs-slider-track');
    const prevBtn = document.getElementById('wildFigs-prev-btn');
    const nextBtn = document.getElementById('wildFigs-next-btn');
    const slides = document.querySelectorAll('.wildFigs-slide');

    if (slides.length === 0) return;

    let currentIndex = 0;
    const slideCount = slides.length;
    const visibleSlides = 4;
    let slideWidth = slides[0].offsetWidth + 15;

    function updateSlider() {
      const maxIndex = Math.max(slideCount - visibleSlides, 0);
      currentIndex = Math.min(Math.max(currentIndex, 0), maxIndex);

      const translateX = -currentIndex * slideWidth;
      track.style.transform = `translateX(${translateX}px)`;

      prevBtn.style.opacity = currentIndex <= 0 ? '0.5' : '1';
      prevBtn.style.pointerEvents = currentIndex <= 0 ? 'none' : 'auto';

      nextBtn.style.opacity = currentIndex >= maxIndex ? '0.5' : '1';
      nextBtn.style.pointerEvents = currentIndex >= maxIndex ? 'none' : 'auto';
    }

    function scrollSlider(direction) {
      currentIndex += direction;
      updateSlider();
    }

    prevBtn.addEventListener('click', () => scrollSlider(-1));
    nextBtn.addEventListener('click', () => scrollSlider(1));

    window.addEventListener('resize', () => {
      slideWidth = slides[0].offsetWidth + 15;
      updateSlider();
    });

    updateSlider();
  });
</script>

{% schema %}
{
  "name": "Collection Slider",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Featured Collections"
    },
    {
      "type": "collection_list",
      "id": "collections",
      "label": "Select Collections"
    }
  ],
  "presets": [
    {
      "name": "Collection Slider",
      "category": "Collections"
    }
  ]
}
{% endschema %}
